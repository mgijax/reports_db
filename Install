#!/bin/csh

#
# To install this product in the appropriate directory
#
# 1. cd to the parent of the installation directory (i.e. /usr/local/mgi)
# 2. cvs export -r reports_db-#-# reports_db
# 3. cd to the installation directory
# 4. cp Configuration.default Configuration
# 5. edit Configuration file
# 6. run Install
#

source ./Configuration

sed "s/ftp.informatics.jax.org/$FTPURL/" index.html > index.html.new
mv -f index.html.new index.html

foreach i (index.html)
	rcp -r $i ${FTPREPORTDIR}
end

cd daily
set toEdit=`grep -l radar *`
foreach i ($toEdit)
sed "s/radar/$RADARDB/g" $i > $i.new
mv -f $i.new $i
end

if ( ! -d ${REPORTDIR} ) then
	mkdir ${REPORTDIR}
endif

if ( ! -d ${REPORTOUTPUTDIR} ) then
	mkdir ${REPORTOUTPUTDIR}
endif

if ( ! -d ${REPORTOUTPUTDIR}/mgimarkerfeed ) then
	mkdir ${REPORTOUTPUTDIR}/mgimarkerfeed
endif

if ( ! -d ${REPORTLOGSDIR} ) then
	mkdir ${REPORTLOGSDIR}
endif

if ( ! -d ${INPARANOIDDIR} ) then
	mkdir ${INPARANOIDDIR}
endif

# provide a link to the Mammalian Phenotype vocabulary
cd ${REPORTOUTPUTDIR}
foreach f (${MPFILES})
rm -rf $f
ln -s ${MPVOCSOURCE}/$f .
end

# provide a link to the Adult Mouse Anatomy vocabulary
cd ${REPORTOUTPUTDIR}
foreach f (${MAFILES})
rm -rf $f
ln -s ${MAVOCSOURCE}/$f .
end

cd ${REPORTINSTALLDIR}
chmod 644 Configuration* HISTORY *.html
chmod 755 *.sh */*.py */*.sql Install
chmod 755 daily monthly weekly

