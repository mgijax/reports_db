#!/bin/csh

#
# Install
#
# Installs product "qcreports_db" in the appropriate directory
#

if ( ! -e Configuration ) then
	cp -r Configuration.default Configuration
endif

source Configuration

if ( ! ${?REPORTINSTALLDIR} ) then
	echo "Environment variable REPORTINSTALLDIR has not been defined."
	echo "It should be set to the parent directory of the report DB applications." 
	exit 1
endif

#
# Copy installation files to installation directory
#

foreach i (`ls Configuration *.sh`)
	cp -r $i $REPORTINSTALLDIR
end

cp -r daily $REPORTINSTALLDIR
cp -r weekly $REPORTINSTALLDIR
cp -r monthly $REPORTINSTALLDIR

foreach i (`ls index.html tab-delimited.html`)
	cp -r $i $FTPREPORTDIR
end

#
# Make report output directory, if it does not exist
#

if ( ! -e $REPORTOUTPUTDIR ) then
	mkdir $REPORTOUTPUTDIR
endif

# Copy system_docs

cp -r system_docs $REPORTINSTALLDIR
chmod 755 $REPORTINSTALLDIR/system_docs
chmod 644 $REPORTINSTALLDIR/system_docs/*

chmod 755 $REPORTINSTALLDIR/*.sh $REPORTINSTALLDIR/*/*.sql $REPORTINSTALLDIR/*/*.py

